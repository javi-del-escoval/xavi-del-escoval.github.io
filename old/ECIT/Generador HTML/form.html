<script>
	const detailsElements = document.querySelectorAll('.modulos');
	detailsElements.forEach(details => {
	    details.addEventListener('mouseover', () => {
	        details.setAttribute('open', true);
	    });
	    details.addEventListener('mouseout', () => {
	        details.removeAttribute('open');
	    });
	});
	function onlyOneSubmission(element)
	{
		if(element.form.checkValidity()) {
			setTimeout(() => {
				element.value='Enviando...';
				element.disabled=true;
			} ,0);
		}
		return true;
	}
	function select_module(element)
	{
		var input = element.getElementsByTagName("input")[0];
		if(input) { input.checked = !input.checked; }
		element.parentElement.classList.toggle("selected-module");
		element.parentElement.classList.toggle("unselected-module");
		// floating selected list
		var moduleList = document.getElementsByClassName("list-modulos")[0].getElementsByTagName("li");
		if(moduleList) {
			[...moduleList].forEach(item => { if(input.name == item.id) { item.classList.toggle("hidden"); }});
		}
		// at least one module selected
		var checkboxesList = document.querySelectorAll(".modulo-check");
		var validator = document.getElementById("validator");
		var anyChecked = [...checkboxesList].some(box => box.checked);
		if (anyChecked) {
			validator.value = "ok";
			validator.setCustomValidity('');
		} else {
			validator.value = "";
			validator.setCustomValidity('Selecciona al menos un módulo');
		}
	}
</script>
<form method="post" autocomplete="on">
	<div class="custom-form-modulos">
		<h2>Paso 1: Selecciona los Módulos que Necesitas</h2>
		<h5 style="margin:0;padding:0;"><input type="text" id="validator" tabindex="-1" style="position:absolute;opacity:0;height:0;width:0;" oninvalid="this.setCustomValidity('Selecciona al menos un módulo')" required autocomplete="off" /></h5>
		<div class="separator"></div>
		<section id="Básicos">
			<h3>Módulos Básicos</h3>
			<div class="container-modulos">
				<details class="modulo unselected-module">
					<summary>
						<strong>Introducción al hidrógeno</strong>
					</summary>
					<div>
						<ul>
							<li>Qué es el hidrógeno</li>
							<li>Características físico-químicas del H<sub>2</sub></li>
							<li>Cadena de valor del H<sub>2</sub></li>
							<li>Producción y aplicaciones</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-introducción-al-hidrógeno" value="Introducción al hidrógeno">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Generación de hidrógeno</strong>
					</summary>
					<div>
						<ul>
							<li>Tecnologías de producción de hidrógeno</li>
							<li>Electrólisis Alcalina, PEM y AEM</li>
							<li>Nuevas tecnologías</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-generación-de-hidrógeno" value="Generación de hidrógeno">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Celdas de combustible de hidrógeno</strong>
					</summary>
					<div>
						<ul>
							<li>Qué es una Celda de Combustible</li>
							<li>Tipos de celdas H<sub>2</sub></li>
							<li>Comparación con baterías</li>
							<li>Aplicaciones de celdas</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-celdas-de-combustible-de-hidrógeno" value="Celdas de combustible de hidrógeno">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Mercado y ecosistema del H<sub>2</sub> y derivados</strong>
					</summary>
					<div>
						<ul>
							<li>Mercado nacional e internacional</li>
							<li>Actores y ecosistema nacional</li>
							<li>Estado actual y proyecciones futuras</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-mercado-y-ecosistema-del-h2-y-derivados" value="Mercado y ecosistema del H2 y derivados">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Desarrollo de proyectos</strong>
					</summary>
					<div>
						<ul>
							<li>Fases de un proyecto</li>
							<li>Montos de inversión</li>
							<li>Barreras y oportunidades</li>
							<li>Ejemplos: proyectos existentes</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-desarrollo-de-proyectos" value="Desarrollo de proyectos">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Carbono neutralidad a 2050</strong>
					</summary>
					<div>
						<ul>
							<li>Conceptos básicos de carbononeutralidad</li>
							<li>Acuerdos de carbono neutralidad de paises, instituciones internacionales y sectores</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-carbono-neutralidad-a-2050" value="Carbono neutralidad a 2050">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
			</div>
		</section>
		<div class="separator"></div>
		<section id="Avanzados">
			<h3>Módulos Avanzados</h3>
			<div class="container-modulos">
				<details class="modulo unselected-module">
					<summary>
						<strong>Marco regulatorio actual Chileno del Hidrógeno y sus derivados</strong>
					</summary>
					<div>
						Marco regulatorio actual de:
						<ul>
							<li>Hidrógeno</li>
							<li>Amoniaco</li>
							<li>Metanol</li>
							<li>Otros combustibles derivados (SAF, DME, efuels, etc.)</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-marco-regulatorio-actual-chileno-del-hidrógeno-y-sus-derivados" value="Marco regulatorio actual Chileno del Hidrógeno y sus derivados">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Planificación regulatoria en Chile</strong>
					</summary>
					<div>
						<ul>
							<li>Estrategia nacional y Plan de acción H<sub>2</sub>V</li>
							<li>Hoja de Ruta SAF</li>
							<li>Amoniaco</li>
							<li>Centros de investigación</li>
							<li>Elaboración y modificación de regulaciones</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-planificación-regulatoria-en-chile" value="Planificación regulatoria en Chile">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Certificación internacional con foco en RED</strong>
					</summary>
					<div>
						<ul>
							<li>Cómo funcionan las certificaciones</li>
							<li>Esquemas y certificaciones mundiales</li>
							<li>Profundización en certificación europea: RED III</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-certificación-internacional-con-foco-en-red" value="Certificación internacional con foco en RED">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Proyectos actuales y proyecciones en Chile y el mundo</strong>
					</summary>
					<div>
						<ul>
							<li>Proyectos actuales en Chile</li>
							<li>Proyectos actuales en el mundo</li>
							<li>Casos de éxito y de falla</li>
							<li>Proyecciones y geopolítica</li>
							<li>Tendencias tecnológicas y de mercado</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-proyectos-actuales-y-proyecciones-en-chile-y-el-mundo" value="Proyectos actuales y proyecciones en Chile y el mundo">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Análisis y evaluación de riesgos en plantas de Hidrógeno</strong>
					</summary>
					<div>
						<ul>
							<li>Definición de conceptos fundamentales</li>
							<li>Sistemas de gestión de seguridad</li>
							<li>Métodos de análisis de riesgos</li>
							<li>HAZOP - conceptos básicos</li>
							<li>Implementación HAZOP en planta de H<sub>2</sub></li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-análisis-y-evaluación-de-riesgos-en-plantas-de-hidrógeno" value="Análisis y evaluación de riesgos en plantas de Hidrógeno">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Casos de accidentes relacionados al Hidrógeno y derivados a nivel mundial</strong>
					</summary>
					<div>
						<ul>
							<li>Proyectos de H12 exitosos y fracasados en el mundo</li>
							<li>Accidentes - Causas y Lecciones aprendidas</li>
							<li>Accidentes - Casos de estudio</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-casos-de-accidentes-relacionados-al-hidrógeno-y-derivados-a-nivel-mundial" value="Casos de accidentes relacionados al Hidrógeno y derivados a nivel mundial">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Electromovilidad con Hidrógeno</strong>
					</summary>
					<div>
						<ul>
							<li>Electromovilidad con FC vs otras tecnologías</li>
							<li>Vehículos impulsados por Hidrógeno</li>
							<li>Estaciones de repostaje</li>
							<li>Celdas de combustible en electromovilidad</li>
							<li>Evaluación técnica-económica de tecnolgías de transporte con Hidrógeno</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-electromovilidad-con-hidrógeno" value="Electromovilidad con Hidrógeno">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Derivados del Hidrógeno</strong>
					</summary>
					<div>
						<ul>
							<li>Métodos de producción: Amoniaco, Metanol, DME, SAF</li>
							<li>Captura de carbono</li>
							<li>Mercados internacionales</li>
							<li>Proyectos existentes</li>
							<li>Tendencias y nuevas tecnologías</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-derivados-del-hidrógeno" value="Derivados del Hidrógeno">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Compresión, acondicionamiento y distribución de Hidrógeno</strong>
					</summary>
					<div>
						<ul>
							<li>Tipos de compresores</li>
							<li>Licuefacción</li>
							<li>Ejemplos de equipos y plantas</li>
							<li>Purificación y secado</li>
							<li>Distribución y dispensación</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-compresión,-acondicionamiento-y-distribución-de-hidrógeno" value="Compresión, acondicionamiento y distribución de Hidrógeno">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Diseño de plantas de Hidrógeno</strong>
					</summary>
					<div>
						<ul>
							<li>Etapas de ingeniería</li>
							<li>Consideraciones de diseño</li>
							<li>Equipamiento e integración</li>
							<li>Normativa y seguridad</li>
							<li>Ejemplos de layout</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-diseño-de-plantas-de-hidrógeno" value="Diseño de plantas de Hidrógeno">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Descarbonización para el sector marítimo y aviación</strong>
					</summary>
					<div>
						<ul>
							<li>Requisitos de descarbonización según IMO/OACI</li>
							<li>Comparación de combustibles</li>
							<li>Proyectos en el mundo</li>
							<li>Hoja de Ruta SAF</li>
							<li>Planificación de descarbonización para el sector marítimo</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-descarbonización-para-el-sector-marítimo-y-aviación" value="Descarbonización para el sector marítimo y aviación">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Amoníaco Verde</strong>
					</summary>
					<div>
						<ul>
							<li>Contexto mundial del amoníaco verde</li>
							<li>Mercados de exportación</li>
							<li>Tecnologías de producción (Haber-Bosch y otros)</li>
							<li>Consideraciones de manejo y seguridad del amoníaco</li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-amoníaco-verde" value="Amoníaco Verde">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
				<details class="empty-module"><summary> </summary></details>
				<details class="modulo unselected-module">
					<summary>
						<strong>Capital humano para la industria del Hidrógeno</strong>
					</summary>
					<div>
						<ul>
							<li>Fases de desarrollo de proyectos de Hidrógeno</li>
							<li>Cuantificación del capital humano requerido</li>
							<li>Perfiles de trabajo</li>
							<li>Demoras y dificultades para despliegue industria H<sub>2</sub></li>
						</ul>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-capital-humano-para-la-industria-del-hidrógeno" value="Capital humano para la industria del Hidrógeno">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
			</div>
		</section>
		<div class="separator"></div>
		<section id="otro">
			<h3>Otros Módulos</h3>
			<div class="container-modulos">
				<details class="empty-module"><summary> </summary></details>
 				<details class="modulo unselected-module">
 					<summary>
 						<strong>Módulo Personalizado</strong>
 					</summary>
					<div>
						<textarea name="personalizado-text" placeholder="Describe el módulo personalizado que te interesa cotizar"></textarea>
						<input type="checkbox" class="modulo-check" style="display:none;" name="modulo-personalizado" value="Personalizado">
						<button type="button" class="button ast-custom-button ast-button" onclick="select_module(this.parentElement)">Seleccionar</button>
					</div>
				</details>
			</div>
		</section>
	</div>
	<div class="separator" id="custom-form"></div>
	<div class="custom-form">
		<h2>Paso 2: Rellena el formulario</h2>
		<input type="text" name="name" placeholder="Nombre Completo" autocomplete="name" oninvalid="this.setCustomValidity('Necesitamos saber tu nombre')" oninput="this.setCustomValidity('')" required>
		<input type="email" name="email" placeholder="Email de Contacto" autocomplete="email" oninvalid="this.setCustomValidity('Por favor ingresa tu correo para ponernos en contacto contigo')" oninput="this.setCustomValidity('')" required>
		<input type="text" name="company" placeholder="Institución" autocomplete="organization" oninvalid="this.setCustomValidity('Este campo es requerido')" oninput="this.setCustomValidity('')" required>
		<textarea name="message" placeholder="Hola, me interesa cotizar los módulos seleccionados" oninvalid="this.setCustomValidity('Cuentanos más detalles de lo que necesitas para poder ayudarte mejor')" oninput="this.setCustomValidity('')" required></textarea><br>
		<input type="submit" id="submit-form-modulos" name="submit-form-modulos" onclick="onlyOneSubmission(this)" value="Enviar"/>
	</div>
</form>